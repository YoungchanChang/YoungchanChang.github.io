---
layout: post
title: fake_db 사용
category: webscraping
tags: [python, webscraping]
comments: python
---

# fake_db

- fake_db는 매우 유용한 테크닉이다. 자료가 많지 않을 때 미리 메모리에 올려놓아서 SQL대신에 쓸 수 있다.

- 자주 검색되는 단어를 빠르게 대처할 수 있다.

# 쓰는 방법

- 1.크롤링 - Server에서 크롤링 요청한 값을 저장해놓기

- 2.CSV파일 저장 - CSV파일을 DB처럼 쓸 수 있다. 여기서 매 번 CSV파일을 읽어오면 속도가 느리니깐, CSV파일을 DB에 저장해놓은 뒤에 필요할 때마다 꺼내쓸 수 있다.

# 사용예시

- 인덱스를 key로 만들고 value값을 가져올 수 있다.

- db.get(word)나 db.get[word]둘 다 value를 반환한다. 여기서 db.get(word)는 값이 있는지 없는지 검사여부에 쓰일 수 있고, db.get[word]는 값을 update하는 데 쓸 수 있다.

- db[word]처럼 존재하지 않는 키(nokey)로 값을 가져오려고 할 경우 db[word]는 **Key 오류를 발생**시키고 db.get(word)는 **None을 돌려준다**는 차이가 있다.


```python
# 1. fakeDB생성
db = {}

@app.route("/report")
def reporting():
    # print(request.args)
    word = request.args.get('word')

    if word:
        word = word.lower()

        # 2. fakeDB에 word로 값이 존재하는지 검사
        is_exist = db.get(word)
        if is_exist:

            # 3. 있다면 해당 값 반환
            jobs = is_exist

        # 4. 없다면 크롤링 수행 후에 값을 저장한다.
        else:
            jobs = get_result(word)
            db[word] = jobs

    return render_template("searchingResult.html",
                           SearchingBy=word,
                           resultsNumber=len(jobs))
app.run(host="127.0.0.1", port=5000)

```
