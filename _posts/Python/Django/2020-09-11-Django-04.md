---
layout: post
title: 파이썬 장고 구성확인
category: Django
tags: [python, Django]
comments: Django
---

### config확인하기

- `__init__.py`는 파이썬에 관련된 파일이다. 새로운 폴더를 만들 때, 파이썬에서 그 폴더의 파일들을 써야 할 때 항상 그 안에 `__init__.py`를 둬야한다. import를 하는 것이다. manage.py에서 "config.settings"를 쓸 수 있다. config폴더가 그 안에 __init__.py를 갖고 있기 때문에, 파이썬 패키지처럼 (import 시켜서) 쓸 수 있다. setting.py가 앱을 만드는데 필요한 모든 것을 준비해뒀다.

- 셋팅에서 TIME_ZONE = "UTC"을  TIME_ZONE = "Asia/Seoul"로 바꾼다.

- 쟝고 위에 있는 코멘트들은 매우 중요하다. 예를 들어서 `# SECURITY WARNING: keep the secret key used in production secret!`이나 `# SECURITY WARNING: don't run with debug turned on in production!`의 경고 문구가 있다.

- 링크들도 중요하다. "https://docs.djangoproject.com/en/2.2/topics/auth/passwords/#password-validation"로 장고 문서를 참조할 수 있다. 아래에 설명서를 읽어보고 **소스코드**도 확인할 수 있다. **장고를 설치**할 때 이런것들이 다 함께 오게 된다.

```
UserAttributeSimilarityValidator, which checks the similarity between the password and a set of attributes of the user.
MinimumLengthValidator, which simply checks whether the password meets a minimum length.

This validator is configured with a custom option: it now requires the minimum length to be nine characters, instead of the default eight.
```

### 관리자 페이지 접속해보기

- `python manage.py runserver`로 서버를 가동시킨다. 아래와 같은 코드가 뜬다. "http://127.0.0.1:8000/"위치로 가면 서버가 동작중이다.

```
September 11, 2020 - 14:42:03
Django version 2.2.5, using settings 'config.settings'
Starting development server at http://127.0.0.1:8000/
```

- 디렉터리에 db.sqlite3파일이 생성된다. http://127.0.0.1:8000/admin으로 가면 관리자 페이지가 뜬다. 

- `Ctrl + z`를 눌러서 서버를 종료시킨뒤에 `python manage.py migrate`엔터를 클릭한다. 그리고 `python manage.py runserver`로 다시 서버를 가동시킨다.

- 그러면 관리자 페이지가 아까와 다르게 보인다.

- `python manage.py createsuperuser`명령어로 슈퍼유저를 만들면 된다. 그리고 다시 `python manage.py runserver`로 파이썬 서버를 구동시키면 된다. 관리자 패널을 쓸 수 있게 된다.

- 전부 별도의 설치 없이 직접 사용할 수 있다!

- `python manage.py migrate`

### migrate

- db.sqlite3를 삭제한 뒤에 `python magage.py runserver`를 실행하면 아래와 같은 메시지가 뜬다.

```
You have 17 unapplied migration(s). Your project may not work properly until you apply the migrations for app(s): admin, auth, contenttypes, sessions.     
Run 'python manage.py migrate' to apply them.
```

- 장고 코드를 사용해서 users, admin, auth, sessions 그 밖의 다양한 것들을 저장할 수 있다. "http://127.0.0.1:8000/admin"로 가게 되면 에러가 뜬다. 장고와 데이터베이스가 연동되지 않았다고 뜬다. SQL데이터베이스는 엑셀과 같이 생겼다. 행과 열이 있다. 

- 장고에는 migration system이 있다. DB의 경우, 하나의 상태에서 다른 데이터 유형으로 바꿔주는 기능이다. 데이터의 유형이 바뀔 때마다 migrate이 필요하다.

- `python manage.py makemigrations` 장고는 데이터 모델(데이터)를 확인하고 migratation파일을 만든다.

- 데이터 유형이 변경되면 `1. migration생성 2. migrate하면 3. 장고가 핸들링`해준다. SQL을 배울 필요가 없다. 장고는 17개의 migration을 진행했다.

- `python manage.py migrate` db.sqlite3가 DB가 정보르 갖게 된다.

- migrate : one db -> another db

### 참고로 알아두면 좋은 사항

- tip : 컨트롤 키를 누르고 마우스를 누르면 해당 function의 정의 부분으로 갈 수 있다.

