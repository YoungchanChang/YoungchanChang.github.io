---
layout: post
title: 유저업데이트
category: Django
tags: [python, Django]
comments: python
---

# 간단한 로직

1. 회원정보 READ

- userID(Primary Key)를 통해 회원 정보를 읽는다.

2. 회원정보 Update

# 고려해야 할 사항

- 카카오로그인은 비밀번호 변경창이 뜨면 안 된다.

# 장고에서 로직

- Request -> URLconf -> View -> MODEL(DB) -> Templte -> Respond

```python
1. urlpatterns를 통해 접근한다.
urlpatterns = [
    path("users/", include("users.urls", namespace="users")),
]

2. profile을 보여준다.
urlpatterns = [
    path("update-profile/", views.UpdateProfileView.as_view(), name="update"),
    path("<int:pk>/", views.UserProfileView.as_view(), name="profile"),
]

- 유저프로필뷰이다. 기본 설정상 user_detail.html를 보게 된다.
- context_object_name는 컨텍스트에서 변수의 이름을 지정해준다. 이름이 겹치지 않게 해준다.
class UserProfileView(DetailView):

    model = models.User
    context_object_name = "user_obj"

3. profile업데이트를 한다.

- context_object_name은 객체를 보여준다.

class UpdateProfileView(UpdateView):

    model = models.User
    template_name = "users/update-profile.html"
    fields = (
        "first_name",
        "last_name",
        "avatar",
        "gender",
        "bio",
        "birthdate",
        "language",
        "currency",
    )

    def get_object(self, queryset=None):
        return self.request.user

```


