---
layout: post
title: FormView
category: Django
tags: [python, Django]
comments: true
---

> [참고](http://ccbv.co.uk/)

# FormView

Form => A페이지에서 B페이지로 **데이터**가 전달되는 **형식** 

View => 요청을 받아서 응답을 반환해주는 호출 가능한 객체

- 데이터가 어떤 모습인지, 요청을 받아서 어떻게 보내줄 것인지 정의해야함

- 4가지를 고려

1. form_class : 사용자에 보여줄 폼을 정의한 forms.py 파일 내의 클래스명
2. templae_name : 폼을 퐇마하여 렌더링할 템플릿 파일 이름
3. success_url : 리다이렉트시킬 URL
4. form_valid()함수 : 유효한 폼 데이터로 처리할 로직 코딩. super()함수를 사용하면, success_url로 지정된 URL로 리다이렉션 처리됨

- 예시 : LoginForm을 보여준 뒤에 요청이 들어오면, form_valid에서 값을 처리한 뒤에 succes_url로 리턴해준다.

```python
class LoginView(FormView):

    template_name = "users/login.html"
    form_class = forms.LoginForm
    success_url = reverse_lazy("core:home")

    def form_valid(self, form):
        email = form.cleaned_data.get("email")
        password = form.cleaned_data.get("password")
        user = authenticate(self.request, username=email, password=password)
        if user is not None:
            login(self.request, user)
        return super().form_valid(form)
```

